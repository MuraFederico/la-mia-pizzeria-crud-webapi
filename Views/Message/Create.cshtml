@{
    ViewData["Title"] = "Contattaci";
}

<h1>Send a message</h1>

<h4>Message</h4>
<hr />
<h2 id="result"></h2>
<div class="row">
    <div class="col-md-4">
        <form id="message-form">
            <div class="form-group">
                <label for="Name" class="control-label">Name</label>
                <input name="Name" id="Name" class="form-control" />
            </div>
            <div class="form-group">
                <label for="Surname" class="control-label">Surname</label>
                <input name="Surname" id="Surname" class="form-control" />
            </div>
            <div class="form-group">
                <label for="Text" class="control-label">Text</label>
                <input name="Text" id="Text" class="form-control" />
            </div>
            <div class="form-group">
                <label for="Email" class="control-label">Email</label>
                <input name="Email" id="Email" class="form-control" />
            </div>
            <div class="form-group">
                <input type="submit" value="Create" class="btn btn-primary" />
            </div>
        </form>
        
    </div>
</div>


<script>

let form = document.getElementById("message-form");

form.addEventListener("submit", sendMessage);

function sendMessage(event) {
    event.preventDefault();

    axios.post("/api/message", {
        Name: document.getElementById("Name").value,
        Surname: document.getElementById("Surname").value,
        Text: document.getElementById("Text").value,
        Email: document.getElementById("Email").value,
    })
    .then(function(respnse) {
        console.log(respnse)
        document.getElementById("Name").value = ""
        document.getElementById("Surname").value = ""
        document.getElementById("Text").value = ""
        document.getElementById("Email").value = ""
        document.getElementById("result").innerText = "Messaggio Inviato correttamente"
    })
    .catch(function(error) {
        console.log(error)
        document.getElementById("result").innerText = "Errore durante l'invio del messaggio"
    })

}



</script>