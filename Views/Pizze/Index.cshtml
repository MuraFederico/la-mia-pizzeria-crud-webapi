@model IQueryable<Pizza>

@{
    ViewData["Title"] = "Le Nostre Pizze";
}

@if(Model.Count() == 0)
{
    <div class="container text-center">
        <h1>NON CI SONO PIZZE DISPONIBILI IN ELENCO</h1>
    </div>
}
else
{
    <section class="wrapper">
    <div class="container">

        <div class="row">
                @*@foreach(Pizza pizza in Model)
                {
                    <div class="col-sm-12 col-md-6 col-lg-4 mb-4">
                        <a href="@Url.Action("Details", "Pizze", new {Id = pizza.Id})">
                            <div class="card text-white card-has-bg click-col" style="background-image: url(@pizza.ImageUrl); ">
                                <div class="card-img-overlay d-flex flex-column justify-content-between">
                                    <div class="card-body">
                                        <h4 class="card-title mt-0 ">@pizza.Name</h4>
                                    </div>
                                    <div class="card-footer align-self-end">
                                        <a class="btn btn-primary" href="@Url.Action("EditForm", "Pizze", new {Id = pizza.Id})">Edit</a>
                                        <a class="btn btn-danger" href="@Url.Action("Delete", "Pizze", new {Id = pizza.Id})">Delete</a>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                }*@
        </div>
  
    </div>
    </section>
}

<script>

    axios.get("api/pizza")
        .then(function (response) {
        // handle success
            const container = document.querySelector(".row");
            response.data.forEach(pizza => { 
                const card = document.createElement("div");
                //<div class="col-sm-12 col-md-6 col-lg-4 mb-4">
                card.className = "col-sm-12 col-md-6 col-lg-4 mb-4"
                card.innerHTML = `<a href="/pizze/details/${pizza.id}"> <div class="card text-white card-has-bg click-col" style="background-image: url(${pizza.imageUrl}); "><div class="card-img-overlay d-flex flex-column justify-content-between"><div class="card-body"><h4 class="card-title mt-0 ">${pizza.name}</h4></div><div class="card-footer align-self-end"><a class="btn btn-primary" href="/pizze/editform/${pizza.id}">Edit</a><a class="btn btn-danger" href="/pizze/delete/${pizza.id}">Delete</a></div></div></div></a>`;
                container.append(card);
            })

            console.log(response.data);
        })
</script>